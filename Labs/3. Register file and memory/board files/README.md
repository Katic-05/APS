# Проверка работы регистрового файла на ПЛИС

После того, как вы создали свое АЛУ и проверили его на прохождение тестирующего модуля, вы можете использовать предложенный модуль окружения [`nexys_reg_file.v`](nexys_reg_file.v), который позволяет связать вашу логику с периферией, расположенной на плате `Nexys-A7`. Для его подключения, скачайте и добавьте файл в проект, либо скопируйте содержимое в новый `.v` файл вашего проекта. В окне `Sources` нажмите на него ПКМ и выберите `Set as Top`, после чего в иерархии он станет главным, подключив ваш собственный модуль АЛУ. Для того, чтобы дизайн мог физически подключиться к периферии, нужно в проекте выбрать `Add Sources`, `Add or create constraints` и подключить файл [`nexys_a7_100t.xdc`](nexys_a7_100t.xdc). Если у вас уже подключен этот файл, необходимо заменить данные на те, которые предложены в текущей лабе.

Подключенное окружение позволяет выставлять адрес на переключателях SW0-SW4, запоминая его для портов A1-A3 с помощью кнопок BTNL, BTNC и BTNR. Вследствие присвоенный адрес будет отображаться на светодиодах для А1: 14-10, А2: 9-5, А3: 4:0 соответственно. Запись информации, выставленной на переключателях SW15-SW0, по адресу А3 производится по нижней кнопке (BTND). Чтение производится по адресам А1 и А2 путем нажатия на верхнюю кнопку (BTNU), после чего данные отображаются на семисегментных индикаторах.

Управление регистровым файлом.

![Управление рег файлом](../../../../technical/Labs/Pic/nexys_rf1.jpg)

Ниже показан пример последовательности действий для работы с платой.

Выставление адреса и "запоминание" в порты А1..А3.

![Выставление адреса](../../../../technical/Labs/Pic/nexys_rf2.jpg)

Запись информации по адресу А3.

![Запись информации](../../../../technical/Labs/Pic/nexys_rf3.jpg)

Чтение по адресам А1 и А2.

![Чтение](../../../../technical/Labs/Pic/nexys_rf4.jpg)

Для прошивки ПЛИС подключите устройство через USB, включите питание переключателем, выполните синтез и имплементацию вашего дизайна и сгенерируйте битстрим. Если на этом этапе у вас возникают ошибки, постарайтесь исправить из с помощью [`инструкции по работе с ошибками синтеза`](../../../Other/Vivado%20Basics/Synthesis%20failed.md). После этого выберите в левом меню `Open Target` - `Auto Connect`, затем `Program Device` и ваше устройство прошьется.

Генерация битстрима
![битстрим](../../../../technical/Labs/Pic/Program_Device1.png)

Прошивка ПЛИС
![Прошивка](../../../../technical/Labs/Pic/Program_Device2.png)

Попробуйте записать информацию по 0 адресу, затем по другим адресам, после чего считайте записанную информацию и убедитесь, что она соответствует той, которую вы записывали.
